<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="utf-8"/>
	<link rel="stylesheet" href="http://cdn.jsdelivr.net/font-hack/2.020/css/hack-extended.min.css">
	<link rel="stylesheet" href="index.css">
	<title>Sean Doyle - My Desktop</title>
  </head>

  <body>
	<script type="text/javascript" src="index.js"></script>

	<main style="flex: 0 77%;margin-right:10%;text-align:left;line-height:30px">
	  <div id="title" style="margin-left:0px;"><b>My Linux Desktop Environment</b></div><div style="line-height:0.1vw"><br/></div>
	  <div id="paragraph">&nbsp;Posted on January 26, 2017</div><div style="line-height:0.1vw"><br/></div>

	  <p>
		<div id="body_text">Everyone has hobbies. Some people play sports. Some people collect things. And some people constantly tweak their desktop environment, never satisfied with it for more than a few months before they have to rewrite the entire thing. I fall into that last category. I'm always working on making my desktop look prettier, and it has been a long journey. Hence, this is the second version of this post I've written (the previous can still be found <a href="rice.html">here</a>, for posterity).<br/><br/>

		  Does anyone really care about my desktop configuration scripts? I don't know. But just in case, <a href="https://github.com/spatrickdoyle/dotfiles-2017">they can all be found on GitHub</a>, and I am going to document every feature here in this post. Perhaps some other ricer will find it interesting and instructive.</div><br/>

		<div id="paragraph">&nbsp;The Look and Feel</div><br/>

		<div id="body_text">The idea behind my current theming is sort of a 'gray and gold' scheme. The previous iteration of my i3 desktop didn't really have a consistent theme. So it looked good, but it wasn't quite as clean and contiguous as it could have been. I have rectified that problem by choosing several colors and sticking to them everywhere I could. The primary color is a shade of gray inspired by the 'Monokai' theme for Sublime Text, and the accents are a shade of gold derived from the wallpaper (which is Raphael's <a href="https://en.wikipedia.org/wiki/Disputation_of_the_Holy_Sacrament"><i>Disputa</i></a>).</div><br/>

		<figure>
		  <img src="img/scrot2.png" alt=""/>
		  <figcaption>
			Screenfetch
		  </figcaption>
		</figure><br/>

		<div id="body_text">The bar at the top is a program called lemonbar. I like lemonbar because it is completely, 100% customizable. I designed my top bar to include all the information I need at a glance, and to deliver that information concisely. Aside from the date and time, it also has an indicator on the far right that delivers a lot of information about the desktop itself. It consists of ten characters, and each character represents one of multiple desktops (which can be switched between via keyboard shortcut). If the character is a dash, nothing is on that desktop. If it is a square, that is the current active desktop. If it is a plus, there is a window open on that desktop but not on the screen.<br/><br/>

		  This bar also indicates battery activity. The bar is white when the battery is full, and the white drops character by character with the battery, with one character representing ten percent. In addition, the bar has controls for volume and brightness, and some icons for opening applications that I use frequently.</div><br/>

		<figure style="width:80%">
		  <img src="img/bar1.png" alt=""/>
		  <figcaption>
			Brightness and volume are controlled with the scroll wheel
		  </figcaption>
		</figure><br/>

		<figure style="width:80%">
		  <img src="img/bar2.png" alt=""/>
		  <figcaption>
			Yellow battery bar indicates it is charging
		  </figcaption>
		</figure><br/>

		<div id="paragraph">&nbsp;The Back-end</div><br/>

		<div id="body_text">The way lemonbar works is it creates a bar at the top of the screen (or if you want to put it somewhere else, you can do that too) and the bar displays whatever text you pipe to it through STDIN. It is therefore 100% up to the user to make it functional, and it requires some coding knowledge to create a back end script for it. The script I use has gone through several iterations. It was initially in Python, and I briefly played with C++ and Java before deciding the simplest and cleanest method would be to use bash.<br/><br/>

		  The script itself doesn't do a whole lot. It updates the bar about five times a second, and each time it makes calls to various other pieces, and constructs their outputs into the nicely visual format that is displayed. Most of the widgets on the bar are generated by their own script - there is the volume indicator, the brightness indicator, the network connection, and the desktop indicator.<br/><br/>

		  The desktop indicator makes a call to 'i3-msg', i3's interface for getting internal data. It can see which desktops are active or have windows on them, and it uses that information to modify the character array that is displayed. I should mention, all the characters in the desktop indicator, as well as several others used elsewhere, are part of the Font Awesome character set.<br/><br/>

		  Another component I wrote is the screen locking script. When I press Ctrl-l, i3 calls i3lock, making it so you have to enter the current user's password to continue using the computer. You can pass an image file as an argument to i3lock, so the script takes a screenshot, uses a C++ program I wrote using OpenCV to pixelate the screenshot, and then calls i3lock with that pixelated screenshot as the image.</div><br/>

		<figure>
		  <img src="img/lockscreen2.png" alt=""/>
		  <figcaption>
			Pixelated lock screen
		  </figcaption>
		</figure><br/>

		<div id="paragraph">&nbsp;Dependencies</div><br/>

		<div id="body_text">I worked hard on this, but it isn't as if I wrote the entire desktop from scratch - I stacked together existing tools to make the environment I wanted. Here's a list of the component programs I used:<br/><br/>

		  The window manager I use (which is the primary component of the whole environment - it hosts all the windows and controls how they behave) is <a href="https://github.com/Airblader/i3">i3-gaps</a>. This is a fork of <a href="https://github.com/i3/i3">i3wm</a> which supports more features, namely gaps. i3 is a tiling window manager. This means that instead of the windows just sort of floating around and the user having to move and size them individually, i3 automatically allocates space for each new window that is opened. The sizes and positions of individual windows can be changed, but i3 attempts to distribute screen real estate somewhat evenly to each window. The idea behind this is that windows will never overlap, and it's easy to have a bunch of windows open on the same screen without having to spend a bunch of time organizing them.</div><br/>

		<figure>
		  <img src="img/tiling2.png" alt=""/>
		  <figcaption>
			An example of how windows tile in i3
		  </figcaption>
		</figure><br/>

		<div id="body_text">The i3-gaps fork introduces gaps between windows, which I like because with gaps you can still see the desktop wallpaper.<br/><br/>

		  Now, since the windows tile, you can't just grab and drag to move them around like you could if they were floating. So to swap the positions of windows on the screen or resize them, keyboard shortcuts are necessary. This is an integral part of the tiling window manager. I personally like it because it decreases dependency on the mouse and makes it really easy to move between desktops. In addition, keyboard shortcuts are used for things like locking the screen, switching windows between floating and tiling, moving between desktops, and all manner of other things.<br/><br/>

		  Speaking of which, i3 supports multiple desktops. This may be an unfamiliar concept for Windows users - the idea that multiple desktops can be running at the same time with different windows open on each of them. But it's really convenient. I can have a terminal open on desktop 1, a browser open on desktop 2, and a text editor open on desktop 3, and they will never overlap.<br/><br/>

		  Nitrogen is a program which allows you to have a desktop wallpaper. That's pretty much it. It works with all kind of different window managers and it comes with a nifty graphical tool.<br/><br/>

		  xcompmgr (which is pretty much short for X Composite Window-effects Manager) is a program which allows windows to have transparency. If a program calls for transparency in a window, xcompmgr composites the window with whatever is behind it. I use it because it is light and I've never had a problem with it.<br/><br>

		  lemonbar is a status bar tool that is really cool. Above I describe its functionality and how I use it specifically. I actually use a fork of lemonbar, <a href="https://github.com/krypt-n/bar">lemonbar-xft</a>, which supports more fonts, but is essentially the same in every other respect. Speaking of fonts, the fonts I use in the lemonbar are Hack and Font Awesome.<br/><br/>

		  The terminal I use is called Terminator, and it has cool features like splitting one window into multiple and opening multiple tabs. I mention is here because I autostart it from my i3 config file, and because I have configured the color scheme to match everything else, but it is not in any way an integral part of my desktop.<br/><br/>

		  The launcher I use is called rofi. A desktop needs some way to launch programs other than a terminal, and rather than a graphical dock or menu, I use rofi. It is a menu that can be launched with a hotkey (I use F12), and you can run any command from within it. It then remembers which programs you use most and presents them to you when you open it successively.</div><br/>

		  <figure>
			<img src="img/rofi.png" alt=""/>
			<figcaption>
			  Rofi, configured to share the color scheme of everything else
			</figcaption>
		  </figure><br/>

		  <div id="body_text">scrot - used to take screenshots. Again, not an integral part of the desktop environment, but it is integrated into the aforementioned lock script, so I mention it as a dependency.<br/><br/>

		  That is more or less every feature of my desktop. Again, maybe no one really cares, but I think this embodies what is great about Linux. It's about choice - I can hop from Debian to Arch to Fedora with a whole bunch of different desktop stacks in between, and in the process I learn a lot about Linux and computers in general. Moral of the story: everyone should use Linux. So there.</div>

	  </p><br/><br/>

	  <div id="foot"></div>
	</main>
  </body>
</html>
